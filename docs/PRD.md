# 가계부 서비스 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트명
가계부 서비스 (Household Book Service)

### 1.2 프로젝트 목적
개인용 온라인 가계부 서비스로, 영수증 OCR 자동 인식 기능을 통해 지출/수입 관리를 자동화하고, 통계 및 예산 관리 기능을 제공합니다.

### 1.3 목표 사용자
개인 사용자 (본인만 사용)

### 1.4 핵심 가치 제안
- 영수증 사진만 찍으면 자동으로 지출 내역 입력
- 카테고리별 예산 설정 및 추적
- 다양한 통계 및 대시보드로 지출 패턴 분석

---

## 2. 기능 요구사항

### 2.1 영수증 OCR 기능 (핵심 기능)

#### 2.1.1 기능 설명
사용자가 영수증 이미지를 업로드하면, OpenAI GPT-4 Vision API를 통해 자동으로 영수증 정보를 인식하고 구조화된 데이터로 변환합니다.

#### 2.1.2 사용자 시나리오
1. 사용자가 영수증 사진을 촬영하거나 기존 이미지를 선택
2. 이미지를 서버에 업로드
3. 백엔드에서 OpenAI Vision API 호출
4. OCR 결과를 JSON 형식으로 반환받음
5. 사용자가 결과를 확인하고 필요시 수정
6. 저장 버튼 클릭 시 거래 내역으로 저장

#### 2.1.3 입력 데이터
- 이미지 파일 (JPG, PNG, HEIC 등)
- 최대 파일 크기: 10MB
- 권장 해상도: 1920x1080 이상

#### 2.1.4 출력 데이터 (JSON 구조)
{
  "date": "2024-01-15",
  "store": "편의점",
  "items": [
    {
      "name": "삼각김밥",
      "price": 2500
    },
    {
      "name": "음료수",
      "price": 1500
    }
  ],
  "total": 4000,
  "category": "식비",
  "confidence": 0.95
}#### 2.1.5 예외 처리
- OCR 실패 시: 사용자에게 수동 입력 안내
- 인식 불확실한 경우: 사용자 확인 요청
- 이미지 품질 낮은 경우: 재촬영 안내

#### 2.1.6 성능 요구사항
- OCR 처리 시간: 5초 이내
- 동시 처리: 1명 사용자이므로 제한 없음

---

### 2.2 지출/수입 관리 기능

#### 2.2.1 기능 설명
사용자가 지출 및 수입 내역을 직접 입력하거나, OCR 결과를 통해 자동으로 입력된 내역을 관리합니다.

#### 2.2.2 주요 기능
- **생성**: 새로운 지출/수입 내역 추가
- **조회**: 목록 조회 (필터링, 검색, 정렬)
- **수정**: 기존 내역 수정
- **삭제**: 내역 삭제

#### 2.2.3 데이터 필드
- `type`: "expense" | "income"
- `date`: 거래 날짜 (ISO 형식)
- `amount`: 금액 (숫자)
- `category`: 카테고리 이름 (문자열)
- `memo`: 메모 (선택)
- `receiptImagePath`: 영수증 이미지 경로 (선택)
- `createdAt`: 생성 일시
- `updatedAt`: 수정 일시

#### 2.2.4 필터링 기능
- 날짜 범위 필터
- 카테고리 필터
- 타입 필터 (지출/수입)
- 금액 범위 필터
- 검색 (메모, 상호명)

#### 2.2.5 정렬 기능
- 날짜순 (최신순/과거순)
- 금액순 (높은순/낮은순)
- 카테고리순

---

### 2.3 카테고리 관리 기능

#### 2.3.1 기능 설명
사용자가 지출/수입 카테고리를 직접 생성하고 관리합니다.

#### 2.3.2 주요 기능
- 카테고리 목록 조회
- 카테고리 생성
- 카테고리 수정 (이름, 색상, 아이콘)
- 카테고리 삭제

#### 2.3.3 데이터 필드
- `name`: 카테고리 이름 (고유)
- `type`: "expense" | "income"
- `color`: UI용 색상 코드 (예: "#FF5733")
- `icon`: UI용 아이콘 이름 (선택)
- `createdAt`: 생성 일시

#### 2.3.4 제약사항
- 카테고리 이름은 중복 불가
- 거래 내역에 사용 중인 카테고리는 삭제 불가 (경고 메시지)

#### 2.3.5 기본 카테고리 (선택사항)
- 식비, 교통비, 쇼핑, 의료비, 교육비, 기타 (지출)
- 월급, 용돈, 부수입, 기타 (수입)

---

### 2.4 예산 관리 기능

#### 2.4.1 기능 설명
카테고리별로 예산을 설정하고, 실제 지출과 비교하여 예산 대비 현황을 추적합니다.

#### 2.4.2 주요 기능
- 카테고리별 예산 설정
- 예산 수정
- 예산 삭제
- 예산 대비 지출 현황 조회

#### 2.4.3 데이터 필드
- `category`: 카테고리 이름
- `amount`: 예산 금액
- `period`: 예산 주기 ("monthly" | "yearly")
- `createdAt`: 생성 일시
- `updatedAt`: 수정 일시

#### 2.4.4 예산 현황 계산
- 현재 기간(월/년)의 해당 카테고리 지출 합계 계산
- 예산 대비 사용률 계산
- 예산 초과 여부 표시

#### 2.4.5 UI 표시
- 예산 대비 사용률 프로그레스 바
- 예산 초과 시 경고 표시
- 남은 예산 금액 표시

---

### 2.5 통계 및 대시보드 기능

#### 2.5.1 대시보드 요약 통계
- 오늘 지출/수입
- 이번 달 지출/수입
- 이번 달 순수입 (수입 - 지출)
- 예산 대비 사용률

#### 2.5.2 카테고리별 통계
- 카테고리별 지출 금액
- 카테고리별 지출 비율 (파이 차트)
- 카테고리별 거래 건수

#### 2.5.3 날짜별 통계
- 일별 지출/수입 추이 (라인 차트)
- 주별 지출/수입 추이
- 월별 지출/수입 추이
- 연별 지출/수입 추이

#### 2.5.4 예산 현황 통계
- 카테고리별 예산 대비 사용률
- 예산 초과 카테고리 목록
- 예산 잔액 현황

#### 2.5.5 트렌드 분석
- 월별 지출 비교 (막대 차트)
- 전월 대비 증감률
- 평균 일일 지출

#### 2.5.6 수입 대비 지출 분석
- 수입 대비 지출 비율
- 저축률 계산

---

### 2.6 설정 기능

#### 2.6.1 기본 설정
- 통화 단위 설정 (원, 달러 등)
- 날짜 형식 설정
- 언어 설정 (한국어)

#### 2.6.2 데이터 관리
- 데이터 내보내기 (CSV, JSON)
- 데이터 가져오기
- 데이터 초기화

---

## 3. 비기능 요구사항

### 3.1 성능 요구사항
- 페이지 로딩 시간: 2초 이내
- API 응답 시간: 1초 이내 (OCR 제외)
- OCR 처리 시간: 5초 이내

### 3.2 보안 요구사항
- 파일 업로드 검증 (파일 타입, 크기)
- SQL Injection 방지 (MongoDB 사용으로 자동 방지)
- XSS 방지
- CORS 설정

### 3.3 호환성 요구사항
- 브라우저: Chrome, Edge, Safari 최신 버전
- 운영체제: Windows, macOS, Linux
- 반응형 디자인: 데스크톱 우선, 태블릿 지원

### 3.4 사용성 요구사항
- 직관적인 UI/UX
- 모바일에서도 사용 가능한 반응형 디자인
- 에러 메시지 명확성

---

## 4. 기술 스택

### 4.1 백엔드
- **프레임워크**: FastAPI (Python)
- **데이터베이스**: MongoDB
- **OCR API**: OpenAI GPT-4 Vision API
- **파일 저장**: 로컬 파일 시스템

### 4.2 프론트엔드
- **프레임워크**: React
- **상태 관리**: Context API 또는 Redux (필요시)
- **라우팅**: React Router
- **HTTP 클라이언트**: Axios 또는 Fetch API
- **UI 라이브러리**: (선택 - Material-UI, Ant Design, Tailwind CSS 등)
- **차트 라이브러리**: (선택 - Chart.js, Recharts, ApexCharts 등)

### 4.3 개발 환경
- **로컬 개발**: 로컬 MongoDB, 로컬 파일 시스템
- **인증**: 없음 (개인 사용)

---

## 5. 데이터 모델

### 5.1 Transactions (거래 내역)script
{
  _id: ObjectId,
  type: "expense" | "income",
  date: ISODate,
  amount: Number,
  category: String,
  memo: String,
  receiptImagePath: String,
  createdAt: ISODate,
  updatedAt: ISODate
}### 5.2 Categories (카테고리)t
{
  _id: ObjectId,
  name: String,
  type: "expense" | "income",
  color: String,
  icon: String,
  createdAt: ISODate
}### 5.3 Budgets (예산)
{
  _id: ObjectId,
  category: String,
  amount: Number,
  period: "monthly" | "yearly",
  createdAt: ISODate,
  updatedAt: ISODate
}---

## 6. API 명세

### 6.1 영수증 OCR
- `POST /api/receipt/ocr` - 영수증 이미지 업로드 및 OCR 처리
- `POST /api/receipt/save` - OCR 결과를 거래 내역으로 저장

### 6.2 거래 내역
- `GET /api/transactions` - 목록 조회 (쿼리 파라미터: dateFrom, dateTo, category, type, search)
- `POST /api/transactions` - 생성
- `GET /api/transactions/{id}` - 상세 조회
- `PUT /api/transactions/{id}` - 수정
- `DELETE /api/transactions/{id}` - 삭제

### 6.3 카테고리
- `GET /api/categories` - 목록 조회 (쿼리 파라미터: type)
- `POST /api/categories` - 생성
- `PUT /api/categories/{id}` - 수정
- `DELETE /api/categories/{id}` - 삭제

### 6.4 예산
- `GET /api/budgets` - 예산 목록 조회
- `POST /api/budgets` - 예산 설정
- `PUT /api/budgets/{id}` - 예산 수정
- `DELETE /api/budgets/{id}` - 예산 삭제

### 6.5 통계
- `GET /api/statistics/summary` - 요약 통계
- `GET /api/statistics/by-category` - 카테고리별 통계 (쿼리 파라미터: dateFrom, dateTo)
- `GET /api/statistics/by-date` - 날짜별 통계 (쿼리 파라미터: period, dateFrom, dateTo)
- `GET /api/statistics/budget-status` - 예산 대비 현황
- `GET /api/statistics/trends` - 지출 트렌드 (쿼리 파라미터: period)

---

## 7. UI/UX 설계

### 7.1 페이지 구조
1. **대시보드** (`/`) - 메인 페이지
2. **거래 내역** (`/transactions`) - 거래 목록 및 관리
3. **영수증 업로드** (`/receipt`) - OCR 기능
4. **통계** (`/statistics`) - 상세 통계 및 차트
5. **카테고리 관리** (`/categories`) - 카테고리 CRUD
6. **예산 관리** (`/budgets`) - 예산 설정 및 현황
7. **설정** (`/settings`) - 앱 설정

### 7.2 주요 UI 컴포넌트
- 네비게이션 바
- 통계 카드 (요약 정보)
- 거래 내역 테이블/리스트
- 차트 컴포넌트 (파이, 라인, 막대)
- 모달 (거래 추가/수정, OCR 결과 확인)
- 폼 컴포넌트 (입력, 선택, 업로드)

---

## 8. 개발 단계

### Phase 1: MVP (최소 기능 제품)
- 기본 지출/수입 CRUD
- 영수증 OCR (기본)
- 카테고리 관리
- 기본 통계

### Phase 2: 고도화
- 예산 관리
- 상세 통계 및 차트
- 데이터 필터링/검색

### Phase 3: 최적화
- UI/UX 개선
- 성능 최적화
- 에러 처리 강화

---

## 9. 제약사항 및 고려사항

### 9.1 제약사항
- OpenAI API 비용 발생 (이미지당 약 $0.01~0.03)
- 로컬 파일 시스템 사용 (백업 필요)
- 인증 없음 (보안 취약점)

### 9.2 고려사항
- 이미지 파일 크기 관리
- MongoDB 인덱스 설계 (날짜, 카테고리)
- OCR 실패 시 대안 처리
- 데이터 백업 전략

---

## 10. 성공 지표

### 10.1 기능 성공 지표
- OCR 정확도: 80% 이상
- 사용자 만족도: 수동 입력 대비 시간 절감 50% 이상

### 10.2 기술 성공 지표
- API 응답 시간 목표 달성률: 95% 이상
- 에러 발생률: 1% 이하

---

## 11. 향후 개선 사항

- 반복 지출 패턴 학습 및 자동 분류
- 예산 초과 알림 기능
- 데이터 시각화 고도화
- 모바일 앱 개발 (React Native)
- 다중 사용자 지원 (가족 단위)
